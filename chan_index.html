<html lang="en" data-bs-theme="light">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="Mark Otto, Jacob Thornton, and Bootstrap contributors">
    <meta name="generator" content="Astro v5.13.2">
    <title>진찬의 자기소개</title>
    <link rel="canonical" href="https://getbootstrap.com/docs/5.3/examples/album/">
    <script src="/docs/5.3/assets/js/color-modes.js"></script>
    <link href="/docs/5.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB">
    <link rel="apple-touch-icon" href="/docs/5.3/assets/img/favicons/apple-touch-icon.png" sizes="180x180">
    <link rel="icon" href="/docs/5.3/assets/img/favicons/favicon-32x32.png" sizes="32x32" type="image/png">
    <link rel="icon" href="/docs/5.3/assets/img/favicons/favicon-16x16.png" sizes="16x16" type="image/png">
    <link rel="manifest" href="/docs/5.3/assets/img/favicons/manifest.json">
    <link rel="mask-icon" href="/docs/5.3/assets/img/favicons/safari-pinned-tab.svg" color="#712cf9">
    <link rel="icon" href="/docs/5.3/assets/img/favicons/favicon.ico">
    <meta name="theme-color" content="#712cf9">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

    <style>
        .bd-placeholder-img {
            font-size: 1.125rem;
            text-anchor: middle;
            -webkit-user-select: none;
            -moz-user-select: none;
            user-select: none
        }

        @media (min-width: 768px) {
            .bd-placeholder-img-lg {
                font-size: 3.5rem
            }
        }

        .b-example-divider {
            width: 100%;
            height: 3rem;
            background-color: #0000001a;
            border: solid rgba(0, 0, 0, .15);
            border-width: 1px 0;
            box-shadow: inset 0 .5em 1.5em #0000001a, inset 0 .125em .5em #00000026
        }

        .b-example-vr {
            flex-shrink: 0;
            width: 1.5rem;
            height: 100vh
        }

        .bi {
            vertical-align: -.125em;
            fill: currentColor
        }

        .nav-scroller {
            position: relative;
            z-index: 2;
            height: 2.75rem;
            overflow-y: hidden
        }

        .nav-scroller .nav {
            display: flex;
            flex-wrap: nowrap;
            padding-bottom: 1rem;
            margin-top: -1px;
            overflow-x: auto;
            text-align: center;
            white-space: nowrap;
            -webkit-overflow-scrolling: touch
        }

        .btn-bd-primary {
            --bd-violet-bg: #712cf9;
            --bd-violet-rgb: 112.520718, 44.062154, 249.437846;
            --bs-btn-font-weight: 600;
            --bs-btn-color: var(--bs-white);
            --bs-btn-bg: var(--bd-violet-bg);
            --bs-btn-border-color: var(--bd-violet-bg);
            --bs-btn-hover-color: var(--bs-white);
            --bs-btn-hover-bg: #6528e0;
            --bs-btn-hover-border-color: #6528e0;
            --bs-btn-focus-shadow-rgb: var(--bd-violet-rgb);
            --bs-btn-active-color: var(--bs-btn-hover-color);
            --bs-btn-active-bg: #5a23c8;
            --bs-btn-active-border-color: #5a23c8
        }

        .bd-mode-toggle {
            z-index: 1500
        }

        .bd-mode-toggle .bi {
            width: 1em;
            height: 1em
        }

        .bd-mode-toggle .dropdown-menu .active .bi {
            display: block !important
        }

        main {
            background-color: gainsboro;
        }

        .navigator {
            background-color: gainsboro;
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 100%;
            padding: 0 40px;
            box-sizing: border-box;
        }

        .nav-left,
        .nav-right {
            display: flex;
            align-items: center;
        }

        .nav-menu {
            font-family: 'Montserrat', sans-serif;
            font-weight: 400;
            font-size: 20px;
            text-decoration: none;
            color: violet;
        }

        .col-lg-6 {
            display: flex;
            margin-right: auto !important;
        }

        .profile_image {
            margin-right: 50px;
        }

        .input-group {
            width: 50%;
            margin: 0 auto;
        }
    </style>
    <style id="monica-reading-highlight-style">
        .monica-reading-highlight {
            animation: fadeInOut 1.5s ease-in-out;
        }

        @keyframes fadeInOut {

            0%,
            100% {
                background-color: transparent;
            }

            30%,
            70% {
                background-color: rgba(2, 118, 255, 0.20);
            }
        }
    </style>
    <script type="module">
        // Firebase SDK 라이브러리 가져오기
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-app.js";
        import { getFirestore } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";
        import { collection, addDoc } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";
        import { getDocs } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";
        import { doc, updateDoc, deleteDoc, query, where } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";

        // For Firebase JS SDK v7.20.0 and later, measurementId is optional
        const firebaseConfig = {
            apiKey: "AIzaSyAgIgGbbxnNSJ-M89uxCHZNrt7Vb2Db9HE",
            authDomain: "sparta-42ae3.firebaseapp.com",
            projectId: "sparta-42ae3",
            storageBucket: "sparta-42ae3.firebasestorage.app",
            messagingSenderId: "797121303679",
            appId: "1:797121303679:web:e2efc1af947d805b779b4a",
            measurementId: "G-7R22563T4D"
        };


        // Firebase 인스턴스 초기화
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        let profile_info = await getDocs(collection(db, "profile"));
        profile_info.forEach((info) => {
            let row = info.data();

            let photo = row['photo'];
            let name = row['name'];
            let introduce = row['introduce'];

            document.getElementById('card_photo').src = photo;
            $('#card_name').text(name);
            $('#card_introduce').text(introduce);
        });

        $("#guest_inputbtn").click(async function () {
            let name = $('#guest_name').val();
            let comment = $('#guest_comment').val();

            let doc = {
                'name': name,
                'comment': comment,
            };
            await addDoc(collection(db, "guestbook"), doc);
            alert('방명록 업로드 완료');
            window.location.reload();
        })

        let docs = await getDocs(collection(db, "guestbook"));

        docs.forEach((doc) => {
            let row = doc.data();

            let name = row['name'];
            let comment = row['comment'];
            let document_name = doc.id;
            console.log(document_name);

            let temp_html = `
            <div class="col">
                        <div class="card shadow-sm">
                            <div class="card-body">
                                <h5>${name}</h5>
                                <p class="card-text">${comment}</p>
                                <div class="d-flex justify-content-between align-items-center">
                                    <div class="btn-group"> <button type="button"
                                            class="btn btn-sm btn-outline-secondary deletebtn" value=${document_name}>Delete</button> </div> <small
                                        class="text-body-secondary">9 mins</small>
                                </div>
                            </div>
                        </div>
                    </div>`;
            $('#guest_cardsbox').append(temp_html);
        });

        $('#guest_cardsbox').on('click', '.deletebtn', async function () {
            let docid = $(this).val();  // 버튼 value 속성에서 doc.id 꺼내옴

            try {
                await deleteDoc(doc(db, "guestbook", docid)); // Firestore 문서 삭제
                alert("방명록이 삭제되었습니다");
                window.location.reload();
            } catch (error) {
                console.error("삭제 오류:", error);
                alert("삭제 중 오류 발생 : " + error);
            }
        });
    </script>
</head>

<body monica-id="ofpnmcalabcbjgholdjcjblkibolbppb" monica-version="7.9.7">
    <nav class="navigator" id="topsection">
        <div class="nav-left">
            <a class="nav-menu" href="mainPage.html">
                <<< <a>
        </div>
        <div class="nav-right">
            <a class="nav-menu" href="chan_index.html">꒰১♥໒꒱</a>
        </div>
    </nav>
    <header data-bs-theme="dark">
        <div class="collapse text-bg-dark" id="navbarHeader">
            <div class="container">
                <div class="row">
                    <div class="col-sm-8 col-md-7 py-4">
                        <h4>About</h4>
                        <p class="text-body-secondary">Add some information about the album below, the author, or any
                            other background context. Make it a few sentences long so folks can pick up some informative
                            tidbits. Then, link them off to some social networking sites or contact information.</p>
                    </div>
                    <div class="col-sm-4 offset-md-1 py-4">
                        <h4>Contact</h4>
                        <ul class="list-unstyled">
                            <li><a href="#" class="text-white">Follow on X</a></li>
                            <li><a href="#" class="text-white">Like on Facebook</a></li>
                            <li><a href="#" class="text-white">Email me</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

    </header>
    <main>
        <section class="py-5 container">
            <div class="row py-lg-5">
                <div class="col-lg-6">
                    <div class="profile_image">
                        <img src="chan_profile.jpg" id="card_photo">
                        <p> <a href="https://blog.naver.com/shortring" class="btn btn-primary my-2">Naver Blog</a> <a
                                href="https://github.com/shortring" class="btn btn-secondary my-2">Github</a> </p>
                    </div>
                    <div>
                        <h1 class="fw-light" id="card_name">김진찬</h1>
                        <p class="lead text-body-secondary" id="card_introduce">요란한 빈 깡통에서 속이 가득찬 사람이 될 때까지 </p>
                    </div>
                </div>
            </div>
        </section>
        <div class="guestbook">
            <div class="input-group mb-3">
                <input type="text" class="form-control" placeholder="Username" aria-label="Username" id="guest_name">
                <span class="input-group-text">댓글</span>
                <input type="text" class="form-control" placeholder="comment" aria-label="Comment" id="guest_comment">
                <div class="text-end"> <span class="input_guestbtn" id="guest_inputbtn"><button type="button"
                            class="btn btn-warning">입력</button></span>
                </div>
            </div>
        </div>
        <div class="album py-5 bg-body-tertiary">
            <div class="container">
                <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 g-3" id="guest_cardsbox">
                    <div class="col">
                        <div class="card shadow-sm">
                            <div class="card-body">
                                <h5>김진찬</h5>
                                <p class="card-text">기본 방명록 작성 테스트 용입니다.</p>
                                <div class="d-flex justify-content-between align-items-center">
                                    <div class="btn-group"> <button type="button"
                                            class="btn btn-sm btn-outline-secondary deletebtn">Delete</button> </div>
                                    <small class="text-body-secondary">9 mins</small>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>
    <footer class="text-body-secondary py-5">
        <div class="container">
            <p class="float-end mb-1"> <a href="#topsection">상단으로 </a> </p>
            <p class="mb-1">이곳은 개인 소개 페이지입니다. 자세한 사항은 zinchan1@naver.com 으로 문의주세요.</p>
            <p class="mb-0">해당 페이지는 부트스트랩의 디자인을 사용했습니다.<a href="https://getbootstrap.com/docs/5.3/examples/album/#">참고한 부트스트랩 페이지</a></p>
        </div>
    </footer>
    <script src="/docs/5.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI"
        class="astro-vvvwv3sm"></script>
    <div id="monica-content-root" class="monica-widget" style="pointer-events: auto;"></div>
</body><whale-quicksearch translate="no" style="visibility: visible;"></whale-quicksearch>

</html>